<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CrudCandidatos</title>

    <script>
        function abrirInserirCandidato() {
            document.getElementById("formInserirCandidato").style.display = "block";
            document.getElementById("formListarCandidatos").style.display = "none";
            document.getElementById("msgListarCandidatos").innerHTML = "";
            esconderMensagens();
        }

        function EnviarCandidato() {
            var nome = document.getElementById("nome").value;
            var cpf = document.getElementById("cpf").value;
            var rg = document.getElementById("rg").value;
            var email = document.getElementById("email").value;
            var cargo = document.getElementById("cargo").value;
            var sala = document.getElementById("sala").value;

            var formData = new FormData();
            formData.append("nome", nome);
            formData.append("cpf", cpf);
            formData.append("rg", rg);
            formData.append("email", email);
            formData.append("cargo", cargo);
            formData.append("sala", sala);

            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("msgIncluir").innerHTML = this.responseText;
                    resetForm();
                } else if (this.readyState < 4) {
                    console.log("Aguardando resposta...");
                } else {
                    console.log("Requisição falhou: " + this.status);
                }
            };

            xmlhttp.open("POST", "InserirCandidato.php", true);
            xmlhttp.send(formData);
        }

        function ListarCandidatos() {
            fetch("ListarCandidatos.php", { method: "POST" })
                .then(response => response.text())
                .then(data => {
                    document.getElementById("msgListarCandidatos").innerHTML = data;
                    document.getElementById("formInserirCandidato").style.display = "none";
                    document.getElementById("msgIncluir").innerHTML = "";
                })
                .catch(error => console.log("Erro ao listar candidatos: " + error));
        }

        function abrirInserirFiscal() {
            document.getElementById("formInserirFiscal").style.display = "block";
          
            document.getElementById("msgListarFiscais").innerHTML = "";
            esconderMensagens();
        }

        function EnviarFiscal() {
            var nome = document.getElementById("nomeFiscal").value;
            var cpf = document.getElementById("cpfFiscal").value;
            var cargo = document.getElementById("cargoFiscal").value;
            var sala = document.getElementById("salaFiscal").value;

            var formData = new FormData();
            formData.append("nome", nome);
            formData.append("cpf", cpf);
            formData.append("sala", sala);

            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("msgIncluirFiscal").innerHTML = this.responseText;
                    resetForm();
                } else if (this.readyState < 4) {
                    console.log("Aguardando resposta...");
                } else {
                    console.log("Requisição falhou: " + this.status);
                }
            };

            xmlhttp.open("POST", "InserirFiscal.php", true);
            xmlhttp.send(formData);
        }

    </script>
    
</head>
<body>
    <h1>Candidatos</h1>
    <br>
    <ul>
        <a href="#" onclick="abrirInserirCandidato()">Inserir Candidato</a>
        <a href="#" onclick="ListarCandidatos()">Listar Candidatos</a>
        <br>
        <a href="#" onclick="abrirInserirFiscal()">Inserir Fiscal</a>
        <br>
    </ul>

    <br>
    <form id="formListarCandidatos" style="display: none;">
        <h2>Listar Candidatos</h2>
        <button type="button" onclick="ListarCandidatos()">Listar</button>
    </form>
    <p id="msgListarCandidatos"></p>
    <br>
    <br>
  
    <form id="formInserirCandidato" style="display: none;">
        NOME: <input type="text" name="nome" id="nome" required> <br>
        CPF: <input type="text" name="cpf" id="cpf" required> <br>
        RG: <input type="text" name="rg" id="rg"> <br>
        EMAIL: <input type="text" name="email" id="email"> <br>
        CARGO: <input type="text" name="cargo" id="cargo"> <br>
        SALA: <input type="text" name="sala" id="sala"> <br>
        <br><br>
        <input type="button" value="Inserir" onclick="EnviarCandidato();">
    </form>
    <p id="msgIncluir"></p>

    <br>

    <form id="formListarFiscais" style="display: none;">
        <h2>Listar Fiscais</h2>
        <button type="button" onclick="ListarFiscais()">Listar</button>
    </form>
    <p id="msgListarFiscais"></p>
    <br>
    <br>

    <form id="formInserirFiscal" style="display: none;">
        NOME: <input type="text" name="nome" id="nomeFiscal" required> <br>
        CPF: <input type="text" name="cpf" id="cpfFiscal" required> <br>
        SALA: <input type="text" name="sala" id="salaFiscal"> <br>
        <br><br>
        <input type="button" value="Inserir" onclick="EnviarFiscal();">
    </form>
    <p id="msgIncluirFiscal"></p>

    <br>
    
</body>
</html>
